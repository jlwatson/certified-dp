# Deprecated (see `main` branch at [https://github.com/jlwatson/certified-dp](https://github.com/jlwatson/certified-dp) for updated code)

Code merged into main branch so this branch is no longer needed :)

-----

## Certified DP - Census Query Example

This branch contains modfied Prover and Verifier executables that execute the main certified DP protocol to perform a query on a 2018 US Census PUMS dataset [(https://www.census.gov/programs-surveys/acs/microdata.html)](https://www.census.gov/programs-surveys/acs/microdata.html). It contains AGEP (age), SEX (sex), SCHL (education) and PINCP (personal income) for 7000 anonymous respondents. We pack the data for each entry into a 37-bit database value that the Prover and Verifier operate over.

The Verifier calculates the predicates and coefficients to count the entries that satisfy "income <= 262144" and outputs the result. 

### Getting started

This projects requires:
  1. A Rust installation: [(https://www.rust-lang.org/tools/install)](https://www.rust-lang.org/tools/install).
  2. A C compiler: `apt install gcc`

### Running the query

To execute the query, run:

`$ python experiment.py --db-size=7000 --max-degree=6 --dimension=37 --epsilon=1 --sparsity=64 --skip-dishonest --num-queries=1`

Both processes will start and begin printing status messages to `stderr`. Once the query has been completed, a summary of performance statistics for both parties will be printed to `stdout` -- these timing outputs underly the evaluation in our paper.

Note that the maximum predicate degree the prover supports is 6 (enough to evaluate the higher-order income bits in each entry), while the per-entry dimension is 37. We set sparsity to 64 (appx. the sparsity of the generated query) and ask the prover to perform honest verification only (as would likely be the case if querying the Census directly).

### Generating data used in the paper

Executing the convenience script `census/census.sh` will run the experiment query and save the latency numbers that we report in Section 5.2 to `census/census-d-7000-max-6-d-64-e-1-s-6.log`.

### Branch structure

```
census/
    census_pums_2018.csv  # raw 2018 PUMS data from census.gov
    pack_database.py      # script to pack raw data into 37-bit database for our protocol
    census_db.bin         # binary database generated by pack_database.py
    *.log                 # experimental output from query execution
    census.sh             # convenience script to execute and log query output
```
